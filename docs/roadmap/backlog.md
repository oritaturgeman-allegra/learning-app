# Product Backlog

This backlog contains future features organized by version. Items here are not yet scheduled into specific sprints.

---

## Version 1.5 - Export & Data Visualization
**Focus:** Content portability, visual insights, and Hebrew language support
**Features:** 3
**Estimated Timeline:** Jan 2026

### Feature 8: Export Capabilities ðŸ’¾
**Priority:** Medium
**User Value:** Save and share newsletters in multiple formats

**Implementation:**
- Export newsletter as PDF (print-ready format with branding)
- Export newsletter as plain text email (for email clients)

**UX Design:**
- Add "Export" button below market summary
- Dropdown menu to select format (PDF/Email)
- Download initiates immediately
- Add sharing options (copy link, email)
- Show export confirmation message

**Technical Approach:**
1. **PDF Generation:**
   - Use `reportlab` or `weasyprint` Python library
   - Create branded template with logo and styling
   - Include charts/images if present

2. **Email Export:**
   - Generate plain text format
   - Structure for readability (sections, spacing)
   - Include "Generated by Capital Market Newsletter" footer

**Success Metrics:**
- Export button accessible in <2 clicks
- PDF generation in <3 seconds
- 25%+ of users use export feature monthly

**Note:** Hebrew export support is in Feature 10 (Hebrew Language Support)

**Estimated Effort:** 1 sprint (2 weeks)

---

### Feature 9: Interactive Charts & Trends ðŸ“ˆ
**Priority:** High
**User Value:** Visualize market movements and understand patterns at a glance

**Implementation:**
- Market index performance charts (S&P 500, TA-35, NASDAQ)
- Category distribution pie chart
- Weekly trend comparison

**UX Design:**
- Add "Charts" section below key events
- Interactive charts using Chart.js or D3.js
- Hover tooltips with detailed data
- Toggle between daily/weekly/monthly views

**Chart Types:**
1. **Line chart** - Index performance (last 7 days)
2. **Bar chart** - News volume by category
3. **Heat map** - Topic trends over time

**Success Metrics:**
- Charts load in <2 seconds
- 50%+ users interact with visualizations
- Responsive design works on mobile

**Estimated Effort:** 2 sprints (4 weeks)

---

### Feature 10: Hebrew Language Support ðŸ‡®ðŸ‡±
**Priority:** Medium
**User Value:** Full Hebrew experience for Hebrew-speaking users

**Implementation:**

**Text-to-Speech:**
- Extend TTS service to support Hebrew voice (OpenAI model: tts-1-hd, voice: shimmer)
- Auto-detect content language and select appropriate voice
- Support bilingual newsletters with language-specific audio tracks
- Generate separate audio files for Hebrew content

**Export Support:**
- Handle RTL text for Hebrew PDF exports
- Support Hebrew in email exports
- Proper Hebrew formatting in all export formats

**UX Design:**
- Language selector in audio player (EN/HE toggle)
- Auto-select voice based on current UI language
- Download buttons for both language versions
- Clear indication of available audio languages

**Technical Approach:**
```python
# Bilingual audio generation
1. Detect newsletter language(s)
2. Generate English audio (voice: nova)
3. Generate Hebrew audio (voice: shimmer)
4. Cache both audio files separately
5. UI presents language selector

# Hebrew export
1. RTL text handling with proper alignment
2. Hebrew fonts in PDF generation
3. Unicode support for email exports
```

**Success Metrics:**
- Hebrew audio quality matches English
- Language switching seamless (<1 second)
- 40%+ of Hebrew users engage with audio
- RTL exports render correctly

**Estimated Effort:** 2 sprints (4 weeks)

---

## Version 1.6 - Personalization & Alerts
**Focus:** User preferences and intelligent notifications
**Features:** 3
**Estimated Timeline:** Feb 2026

### Feature 11: Personalized Alerts âš¡
**Priority:** High
**User Value:** Get notified about topics and companies you care about

**Implementation:**
- Custom keyword tracking (company names, topics, indices)
- Email/SMS notifications for matched keywords
- Priority flagging for important news
- Customizable alert frequency

**UX Design:**
- "Preferences" page for alert setup
- Multi-select for companies of interest
- Slider for alert sensitivity (high/medium/low)
- Toggle notifications on/off per category
- Test alert feature to preview

**Alert Categories:**
- ðŸ¢ Specific companies (e.g., Apple, Check Point, NVIDIA)
- ðŸ“Š Market movements (>5% change in indices)
- ðŸ¤– AI breakthroughs
- ðŸ’° M&A announcements
- ðŸ‡®ðŸ‡± Israeli tech exits

**Success Metrics:**
- Average 3-5 keywords per user
- <5 minute setup time
- 70%+ notification open rate

**Estimated Effort:** 2 sprints (4 weeks)

---

### Feature 12: User Preferences & Customization âš™ï¸
**Priority:** Medium
**User Value:** Personalize newsletter content and presentation

**Implementation:**
- Save preferred categories and sources
- Customize newsletter layout and ordering
- Set default language preference
- Theme selection (light/dark mode)
- Email delivery preferences

**UX Design:**
- Settings page with tabbed sections
- Drag-and-drop to reorder categories
- Preview changes before saving
- Reset to defaults option
- Export/import settings

**Success Metrics:**
- 60%+ of users customize at least one setting
- Settings persist across sessions
- User satisfaction increase by 20%

**Estimated Effort:** 1 sprint (2 weeks)

---

### Feature 13: Source Confidence Scoring & Reliability Analytics ðŸ“ŠðŸ”
**Priority:** Medium
**User Value:** Automatically identify and prioritize the most reliable news sources

**Problem to Solve:**
- Some RSS sources consistently provide articles, others rarely have data
- No way to measure source reliability or uptime
- Sources should be weighted by historical performance
- Users can't see which sources are most trustworthy

**Implementation:**
- **Tracking System:**
  - Record source performance metrics on every newsletter generation
  - Track: uptime %, average articles per check, last active timestamp
  - Store historical data (30-day rolling window)
  - Calculate reliability score (0-100) per source

- **Confidence Scoring Algorithm:**
  ```
  Confidence Score = (Uptime% Ã— 0.4) + (Consistency Ã— 0.3) + (Article Quality Ã— 0.3)

  Where:
  - Uptime% = (checks with articles / total checks) Ã— 100
  - Consistency = Standard deviation of article counts (lower is better)
  - Article Quality = User engagement metrics (future enhancement)
  ```

- **Source Management:**
  - Auto-flag sources with <40% uptime as "unreliable"
  - Suggest removing consistently failing sources
  - Recommend adding new sources from same category
  - Display confidence scores in source monitor UI

**UX Design:**
- **Source Monitor Enhancement:**
  - Show confidence score next to each source name
  - Color-coded reliability badges:
    - ðŸŸ¢ Excellent (80-100%): Consistent, reliable
    - ðŸŸ¡ Good (60-79%): Mostly reliable
    - ðŸŸ  Fair (40-59%): Inconsistent
    - ðŸ”´ Poor (<40%): Consider removing
  - Tooltip with detailed stats: "Yahoo Finance: 95% uptime, avg 4.2 articles"
  - "Last 30 days" performance chart

- **Source Settings Page:**
  - List all sources with confidence scores
  - Toggle sources on/off
  - View detailed performance metrics
  - Add/remove custom RSS feeds
  - "Optimize Sources" button to auto-disable low performers

**Data Model:**
```python
{
  "source_name": "Yahoo Finance",
  "category": "us",
  "confidence_score": 95,
  "metrics": {
    "total_checks": 240,  # 8 checks/day Ã— 30 days
    "successful_checks": 228,
    "uptime_percentage": 95.0,
    "avg_articles_per_check": 4.2,
    "last_active": "2026-02-15T14:30:00",
    "trend": "stable"  # stable, improving, declining
  }
}
```

**Technical Approach:**
1. **Data Collection:**
   - Create `SourceMetricsService` to track all checks
   - Store metrics in JSON file (or future: PostgreSQL)
   - Update metrics after every `fetch_market_data()` call

2. **Analytics Engine:**
   - Calculate scores daily via background task
   - Identify trends (improving/declining sources)
   - Generate weekly summary reports

3. **API Endpoints:**
   - `GET /api/source-metrics` - Get all source stats
   - `GET /api/source-metrics/<source_name>` - Detailed stats
   - `POST /api/sources/optimize` - Auto-disable poor performers

**Success Metrics:**
- Confidence scores calculated for 100% of sources
- Users can identify top 3 sources per category at a glance
- Auto-optimization reduces inactive sources by 50%
- Source uptime tracking accurate to Â±2%

**Benefits:**
- **For Users:** Trust the most reliable sources
- **For Development:** Data-driven source management
- **For Future:** Foundation for ML-based source ranking
- **For Alerts (Feature 11):** Prioritize alerts from high-confidence sources

**Dependencies:**
- Builds on Source Monitoring UI (v1.3.7) âœ… Complete
- Data persistence layer (JSON or future database)

**Estimated Effort:** 2 sprints (4 weeks)

---

## Version 2.0 - AI Enhancement & Collaboration
**Focus:** Advanced AI capabilities and team features
**Features:** 3
**Estimated Timeline:** Mar-Apr 2026

### Feature 14: Podcast Agent Migration ðŸŽ™ï¸ðŸ¤–
**Priority:** Medium
**User Value:** Dynamic, personalized podcasts that adapt to content and user preferences

**Current State (TTS Service):**
- Simple text-to-speech conversion service
- Hardcoded dialogue templates (Maya & Alex intros)
- Fast and predictable but rigid
- No intelligence or adaptation

**Future State (Podcast Agent):**
- CrewAI agent with creative scriptwriting capabilities
- Dynamically generates dialogue based on content mood and type
- Personalizes podcast style per user preferences
- Adapts tone (serious for crashes, casual for routine updates)

**Why Migrate to Agent:**
- **Content Creation:** Podcast becomes a creative feature, not just audio export
- **Personalization:** Different styles (interview, debate, narrative)
- **Quality:** More engaging, contextual conversations
- **Fits v2.0 Vision:** Integrates with Writer Agent + Editor Agent architecture

**Technical Approach:**
```python
# Agent-based podcast generation
Market Agent â†’ Podcast Agent â†’ Audio Output
    â†“              â†“
 (analyze)    (scriptwrite + TTS)

# Workflow:
1. Podcast Agent receives newsletter data
2. Uses GPT-4 to write creative, contextual dialogue
3. Converts dialogue to audio using TTS
4. Caches both script and audio
```

**Agent Configuration:**
- **Role:** Podcast Scriptwriter & Audio Producer
- **Goal:** Create engaging, personalized audio content
- **Tools:** OpenAI LLM (scriptwriting) + TTS API (audio generation)
- **Inputs:** Newsletter data, user preferences, mood/tone guidance
- **Outputs:** Dynamic dialogue script + audio file

**Tradeoffs:**
- âœ… Creative, adaptive, personalized
- âœ… Fits CrewAI philosophy
- âœ… Supports multiple podcast styles
- âŒ Slower (adds LLM call before TTS)
- âŒ More expensive (2x API costs: LLM + TTS)
- âŒ Less predictable output

**When to Switch:**
- When podcast personalization is needed (Feature 12)
- When Writer/Editor agents are built (Feature 15)
- When we want multiple podcast formats
- When podcast becomes content creation, not just export

**Success Metrics:**
- Podcast engagement increases by 30%
- User satisfaction with dynamic content >85%
- Support 3+ podcast styles (interview, debate, narrative)
- Maintain <1 minute generation time with parallel processing

**Estimated Effort:** 2 sprints (4 weeks)

---

### Feature 15: AI-Powered Analysis & Insights ðŸ§ 
**Priority:** High
**User Value:** Deeper market understanding with predictive insights and expert analysis

**Implementation:**
- **Writer Agent:** Creates narrative analysis from data
- **Editor Agent:** Ensures quality, consistency, tone
- **Trend Analyzer:** Identifies emerging patterns
- **Prediction Module:** Simple forecasting based on historical data

**Multi-Agent Workflow:**
```
Market Intelligence Agent (existing)
    â†“
Trend Analyzer Agent (new)
    â†“
Writer Agent (new)
    â†“
Editor Agent (new)
    â†“
Final Newsletter
```

**Enhanced Output:**
- **Executive Summary:** 2-3 paragraph analysis
- **Key Insights:** 5 strategic takeaways
- **Market Outlook:** Short-term predictions
- **Risk Factors:** Potential concerns to watch
- **Opportunities:** Investment ideas (informational only)

**UX Design:**
- Expandable "AI Insights" section
- Color-coded risk indicators
- Confidence scores for predictions
- Sources and reasoning transparency
- "Deep Dive" button for detailed analysis

**Success Metrics:**
- AI analysis accuracy >75%
- User trust score >80%
- 60%+ users engage with insights section

**Estimated Effort:** 3-4 sprints (6-8 weeks)

---

### Feature 16: Collaboration & Sharing ðŸ‘¥
**Priority:** Medium
**User Value:** Teams can collaborate on market analysis and share insights

**Implementation:**
- User accounts and authentication
- Team workspaces
- Shared newsletters with comments
- Annotations and highlights
- Activity feed for team updates

**UX Design:**
- "Teams" tab in navigation
- Invite members via email
- @mention teammates in comments
- Highlight text to add notes
- Notification center for team activity

**Collaboration Features:**
- ðŸ’¬ Inline comments on news items
- ðŸ“ Shared annotations
- ðŸ”– Bookmarks and favorites
- ðŸ“¤ Share specific sections
- ðŸ“Š Team analytics dashboard

**User Roles:**
- **Admin:** Full access, manage team
- **Analyst:** Create, edit, comment
- **Viewer:** Read-only access

**Success Metrics:**
- Average team size: 3-5 users
- 40%+ of users create teams
- Daily active collaboration rate >50%

**Estimated Effort:** 3-4 sprints (6-8 weeks)

---

## Technical Considerations

### Architecture Principles
- **Modularity:** Each feature as independent module
- **Testability:** Unit + integration tests for all features
- **Scalability:** Design for 10x current load
- **Maintainability:** Clear documentation, clean code

### Infrastructure Needs (for v2.0+)
- **Database:** PostgreSQL for user data and history
- **Caching:** Redis for feed data and audio files
- **Storage:** S3-compatible storage for exports and audio
- **Queue:** Celery for async tasks (audio generation, alerts)

### Security & Privacy (for v2.0+)
- **Authentication:** OAuth 2.0 / JWT tokens
- **Data Encryption:** At rest and in transit
- **API Rate Limiting:** Protect against abuse
- **GDPR Compliance:** User data controls and deletion

---

## Backlog Prioritization

Items in this backlog are prioritized based on:
1. **User Value:** Impact on user experience
2. **Business Goals:** Alignment with product vision
3. **Technical Complexity:** Effort vs. reward
4. **Dependencies:** Building blocks for future features

**Next Review:** December 26, 2025 (Sprint 15 planning)

---

## Deferred from Sprint 5

Items moved from Sprint 5 during Sprint 6 planning (Feb 6, 2026):

_Note: User Analytics, Account Deletion, and Playwright E2E Tests moved to Sprint 7._

### Data Export (GDPR Right to Portability) ðŸ“¤
**Priority:** Low
**Deferred Reason:** GDPR requirement but lower urgency than deletion

**Implementation:**
- Add "Export My Data" button in settings
- Generate JSON/CSV with user's data
- Endpoint: `GET /api/auth/export-data`

---

### Stripe Payment Integration ðŸ’³
**Priority:** Low
**Deferred Reason:** Post-launch monetization feature

---

### Performance Monitoring ðŸ“ˆ
**Priority:** Low
**Deferred Reason:** Post-launch optimization feature

---

## Ideas & Future Exploration

These are ideas that haven't been scoped yet:

- Real-time stock price widgets
- Integration with portfolio tracking tools
- AI-powered newsletter summarization (TL;DR)
- Voice commands for audio player
- Mobile app (iOS/Android)
- API for third-party integrations
- Premium tier with advanced analytics
- Social features (share insights, follow analysts)

---

**Last Updated:** November 29, 2025
**Next Review:** December 26, 2025
